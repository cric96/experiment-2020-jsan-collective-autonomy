incarnation: scafi
#Time unit: Seconds
variables:
  random: &random
    min: 0
    max: 100
    step: 10
    default: 0
  evaluationRate: &evaluationRate
    formula: 1
seeds:
  scenario: *random
  simulation: *random

export:
  - time
  - molecule : solved
    aggregators: [ sum ]
  - molecule: fire
    aggregators: [ sum ]

network-model:
  type: ConnectWithinDistance
  parameters: [20]

pools:
  # Main aggregate program evaluation
  - pool: &program
      - time-distribution:
          type: ExponentialTime
          parameters: [ *evaluationRate ]
        type: Event
        actions:
          - type: RunScafiProgram
            parameters: [ it.unibo.casestudy.market.MarketBasedTaskAllocation, 5.0 ] # second argument is retention time
      - program: send #broadcast the value to the node neighbourhood

displacements:
  - in:
      type: Grid
      parameters: [ -20, -20, 20, 20, 10, 10, 0, 0 ]
    programs:
      - *program
    contents:
      - molecule: solved
        concentration: 0.0
      - molecule: fire
        concentration: 0.0
